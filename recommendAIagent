import React, { useState } from 'react';
import { ChevronRight, Sparkles, Brain, Palette, Zap } from 'lucide-react';

const AIDiagnosticApp = () => {
  const [started, setStarted] = useState(false);
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [answers, setAnswers] = useState({});
  const [showResult, setShowResult] = useState(false);

  const questions = [
    {
      id: 'q1',
      question: 'あなたの仕事で、AIに手伝ってほしいと思うのはどんな場面ですか？',
      options: [
        { text: 'アイデアや企画を考えるとき', scores: { chatgpt: 3, perplexity: 1, manus: 1 } },
        { text: 'デザインや画像を作るとき', scores: { canva: 3, gemini: 2, manus: 1 } },
        { text: '情報をリサーチするとき', scores: { perplexity: 3, chatgpt: 2, genspark: 1 } },
        { text: 'SNS投稿や発信をするとき', scores: { manus: 3, chatgpt: 2, canva: 1 } },
        { text: '同じ作業を何度も繰り返しているとき', scores: { genspark: 3, n8n: 2, chatgpt: 1 } }
      ]
    },
    {
      id: 'q2',
      question: '1日のうち、AIに使える時間はどのくらいですか？',
      options: [
        { text: '5分以内(スキマ時間)', scores: { chatgpt: 2, manus: 2 } },
        { text: '30分くらい(仕事の合間)', scores: { chatgpt: 2, canva: 2, perplexity: 1 } },
        { text: '1時間以上(本格活用)', scores: { genspark: 3, n8n: 2, manus: 2 } }
      ]
    },
    {
      id: 'q3',
      question: '仕事の中で「一番面倒」だと感じるのはどれですか？',
      options: [
        { text: '文章や企画を考えること', scores: { chatgpt: 3, perplexity: 2 } },
        { text: 'デザイン・画像作成', scores: { canva: 3, gemini: 2 } },
        { text: '調べ物・要約', scores: { perplexity: 3, chatgpt: 1 } },
        { text: '同じタスクを繰り返すこと', scores: { genspark: 3, n8n: 2 } }
      ]
    },
    {
      id: 'q4',
      question: 'AIを使ってどんな成果を得たいですか？',
      options: [
        { text: '作業時間を減らしたい', scores: { genspark: 3, n8n: 2, chatgpt: 1 } },
        { text: 'コンテンツの質を上げたい', scores: { chatgpt: 2, canva: 2, perplexity: 2 } },
        { text: '売上・フォロワーを伸ばしたい', scores: { manus: 3, canva: 2, chatgpt: 1 } },
        { text: '自動で回る仕組みを作りたい', scores: { genspark: 3, n8n: 3, manus: 2 } }
      ]
    },
    {
      id: 'q5',
      question: 'AIを使うときに一番苦手・困っていることは？',
      options: [
        { text: '指示の出し方がわからない', scores: { chatgpt: 2, manus: 2 } },
        { text: 'デザインがうまく作れない', scores: { canva: 3, gemini: 2 } },
        { text: '情報を探すのが大変', scores: { perplexity: 3, chatgpt: 1 } },
        { text: 'どのツールを使えばいいか', scores: { chatgpt: 2, genspark: 2 } }
      ]
    },
    {
      id: 'q6',
      question: '「AIに人格があって、自分の代わりに動く」と聞いたら？',
      options: [
        { text: '興味がある！試してみたい', scores: { manus: 3, genspark: 3, n8n: 2 } },
        { text: '便利そうだけど、難しそう', scores: { chatgpt: 2, manus: 2 } },
        { text: 'まだ自分には早い気がする', scores: { chatgpt: 3, canva: 2 } }
      ]
    },
    {
      id: 'q7',
      question: '1ヶ月後、AIでどうなっていたいですか？',
      options: [
        { text: '毎日の仕事が早く終わる', scores: { genspark: 3, chatgpt: 2, n8n: 2 } },
        { text: 'SNS発信がスムーズになる', scores: { manus: 3, canva: 2, chatgpt: 2 } },
        { text: '情報収集が爆速になる', scores: { perplexity: 3, chatgpt: 2 } },
        { text: 'AIが代わりに動く仕組み', scores: { genspark: 3, n8n: 3, manus: 3 } }
      ]
    }
  ];

  const resultPatterns = {
    thinking: {
      title: '文章・アイデア系',
      icon: <Brain className="w-8 h-8 text-blue-500" />,
      tools: [
        { 
          name: 'ChatGPT', 
          logo: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI0IDQ4QzM3LjI1NDggNDggNDggMzcuMjU0OCA0OCAyNEM0OCAxMC43NDUyIDM3LjI1NDggMCAyNCAwQzEwLjc0NTIgMCAwIDEwLjc0NTIgMCAyNEMwIDM3LjI1NDggMTAuNzQ1MiA0OCAyNCA0OFoiIGZpbGw9IiMxMEEzN0YiLz4KPHBhdGggZD0iTTM1LjkgMTguN0MzNyAxNi4xIDM2LjcgMTMuMiAzNSAxMC45QzMzLjIgOC43IDMwLjQgNy40IDI3LjQgNy42QzI2LjIgNiAyNC43IDQuNyAyMi44IDRDMjEgMy4yIDE5IDMgMTcgMy40QzE1IDMuOCAxMy4zIDQuOCAxMS44IDYuMkMxMC40IDcuNiA5LjQgOS40IDguOSAxMS40QzYuOSAxMS45IDUuMSAxMy4yIDQgMTVDMi45IDE2LjggMi41IDE5IDMgMjEuMUMzLjQgMjMuMSA0LjYgMjUgNi40IDI2LjJDNS4yIDI4LjggNS41IDMxLjcgNy4zIDM0QzkuMSAzNi4yIDExLjkgMzcuNSAxNC45IDM3LjNDMTYgMzkgMTcuNiA0MC4yIDE5LjUgNDFDMjEuMyA0MS43IDIzLjMgNDEuOSAyNS4zIDQxLjVDMjcuMiA0MS4xIDI5IDQwLjEgMzAuNSAzOC43QzMxLjkgMzcuMyAzMi45IDM1LjUgMzMuNCAzMy41QzM1LjQgMzMgMzcuMiAzMS43IDM4LjMgMjkuOUMzOS40IDI4LjEgMzkuOCAyNS45IDM5LjMgMjMuOEMzOC45IDIxLjggMzcuNyAxOS45IDM1LjkgMTguN1oiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPg==',
          desc: '思考整理・アイデア出し・文章作成の相棒' 
        },
        { 
          name: 'Perplexity AI', 
          logo: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iOCIgZmlsbD0iIzIwODA4RCIvPgo8cGF0aCBkPSJNMjQgMTJMMzIgMTguNVYzMS41TDI0IDM4TDE2IDMxLjVWMTguNUwyNCAxMloiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPg==',
          desc: 'リサーチ力が圧倒的。最新情報を要約' 
        },
        { 
          name: 'Manus', 
          logo: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iOCIgZmlsbD0iIzNCODJGNiIvPgo8cGF0aCBkPSJNMTggMTJIMzBWMTZIMThWMTJaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTQgMjBIMzRWMjRIMTRWMjBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTggMjhIMzBWMzJIMThWMjhaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjIgMzZIMjZWNDBIMjJWMzZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4=',
          desc: 'あなたの分身AIとして発信を自動化' 
        }
      ],
      message: 'ChatGPTが文章を作り、Perplexityが裏付けを取り、Manusが発信する。'
    },
    design: {
      title: 'デザイン・発信系',
      icon: <Palette className="w-8 h-8 text-pink-500" />,
      tools: [
        { 
          name: 'Canva', 
          logo: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iY2FudmEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgo8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMDBDNENDO3N0b3Atb3BhY2l0eToxIiAvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM3QzNBRUQ7c3RvcC1vcGFjaXR5OjEiIC8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iOCIgZmlsbD0idXJsKCNjYW52YSkiLz4KPHBhdGggZD0iTTI0IDE2QzE5LjYgMTYgMTYgMTkuNiAxNiAyNEMxNiAyOC40IDE5LjYgMzIgMjQgMzJDMjguNCAzMiAzMiAyOC40IDMyIDI0QzMyIDE5LjYgMjguNCAxNiAyNCAxNloiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPg==',
          desc: '画像・動画をAIで瞬時に生成' 
        },
        { 
          name: 'Gemini', 
          logo: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iZ2VtaW5pIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6Izg3Q0VGQTtzdG9wLW9wYWNpdHk6MSIgLz4KPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojNEE5MEU1O3N0b3Atb3BhY2l0eToxIiAvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+CjxyZWN0IHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgcng9IjgiIGZpbGw9InVybCgjZ2VtaW5pKSIvPgo8cGF0aCBkPSJNMjQgMTJMMzAgMjRMMjQgMzZMMTggMjRMMjQgMTJaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4=',
          desc: '同じトーンで画像を量産' 
        },
        { 
          name: 'Manus', 
          logo: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iOCIgZmlsbD0iIzNCODJGNiIvPgo8cGF0aCBkPSJNMTggMTJIMzBWMTZIMThWMTJaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTQgMjBIMzRWMjRIMTRWMjBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTggMjhIMzBWMzJIMThWMjhaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjIgMzZIMjZWNDBIMjJWMzZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4=',
          desc: 'AIが代わりにSNS投稿' 
        }
      ],
      message: 'Canvaがビジュアルを作り、Geminiが素材を補い、Manusが発信を担当。'
    },
    automation: {
      title: '自動化・効率化系',
      icon: <Zap className="w-8 h-8 text-yellow-500" />,
      tools: [
        { 
          name: 'ChatGPT', 
          logo: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI0IDQ4QzM3LjI1NDggNDggNDggMzcuMjU0OCA0OCAyNEM0OCAxMC43NDUyIDM3LjI1NDggMCAyNCAwQzEwLjc0NTIgMCAwIDEwLjc0NTIgMCAyNEMwIDM3LjI1NDggMTAuNzQ1MiA0OCAyNCA0OFoiIGZpbGw9IiMxMEEzN0YiLz4KPHBhdGggZD0iTTM1LjkgMTguN0MzNyAxNi4xIDM2LjcgMTMuMiAzNSAxMC45QzMzLjIgOC43IDMwLjQgNy40IDI3LjQgNy42QzI2LjIgNiAyNC43IDQuNyAyMi44IDRDMjEgMy4yIDE5IDMgMTcgMy40QzE1IDMuOCAxMy4zIDQuOCAxMS44IDYuMkMxMC40IDcuNiA5LjQgOS40IDguOSAxMS40QzYuOSAxMS45IDUuMSAxMy4yIDQgMTVDMi45IDE2LjggMi41IDE5IDMgMjEuMUMzLjQgMjMuMSA0LjYgMjUgNi40IDI2LjJDNS4yIDI4LjggNS41IDMxLjcgNy4zIDM0QzkuMSAzNi4yIDExLjkgMzcuNSAxNC45IDM3LjNDMTYgMzkgMTcuNiA0MC4yIDE5LjUgNDFDMjEuMyA0MS43IDIzLjMgNDEuOSAyNS4zIDQxLjVDMjcuMiA0MS4xIDI5IDQwLjEgMzAuNSAzOC43QzMxLjkgMzcuMyAzMi45IDM1LjUgMzMuNCAzMy41QzM1LjQgMzMgMzcuMiAzMS43IDM4LjMgMjkuOUMzOS40IDI4LjEgMzkuOCAyNS45IDM5LjMgMjMuOEMzOC45IDIxLjggMzcuNyAxOS45IDM1LjkgMTguN1oiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPg==',
          desc: 'メール返信・資料構成をサポート' 
        },
        { 
          name: 'Genspark', 
          logo: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iOCIgZmlsbD0iIzAwMDAwMCIvPgo8cGF0aCBkPSJNMjQgMTJMMzAgMThIMjZWMjZIMzBMMjQgMzZMMTggMzBIMjJWMjJIMThMMjQgMTJaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4=',
          desc: 'ChatGPTの指示を実際に実行' 
        },
        { 
          name: 'n8n', 
          logo: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iOCIgZmlsbD0iI0VBNEIzNyIvPgo8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIyLjUiIGZpbGw9IndoaXRlIi8+CjxjaXJjbGUgY3g9IjI0IiBjeT0iMTYiIHI9IjIuNSIgZmlsbD0id2hpdGUiLz4KPGNpcmNsZSBjeD0iMzIiIGN5PSIxNiIgcj0iMi41IiBmaWxsPSJ3aGl0ZSIvPgo8Y2lyY2xlIGN4PSIxNiIgY3k9IjI0IiByPSIyLjUiIGZpbGw9IndoaXRlIi8+CjxjaXJjbGUgY3g9IjMyIiBjeT0iMjQiIHI9IjIuNSIgZmlsbD0id2hpdGUiLz4KPGNpcmNsZSBjeD0iMTYiIGN5PSIzMiIgcj0iMi41IiBmaWxsPSJ3aGl0ZSIvPgo8Y2lyY2xlIGN4PSIyNCIgY3k9IjMyIiByPSIyLjUiIGZpbGw9IndoaXRlIi8+CjxjaXJjbGUgY3g9IjMyIiBjeT0iMzIiIHI9IjIuNSIgZmlsbD0id2hpdGUiLz4KPC9zdmc+',
          desc: 'AIとアプリを連携して自動化' 
        }
      ],
      message: 'あなたが一度指示すれば、AIが勝手に仕事を進める仕組みを作れます。'
    }
  };

  const handleAnswer = (optionIndex) => {
    const newAnswers = { ...answers, [questions[currentQuestion].id]: optionIndex };
    setAnswers(newAnswers);

    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion(currentQuestion + 1);
    } else {
      setShowResult(true);
    }
  };

  const calculateResult = () => {
    const scores = {};
    
    Object.keys(answers).forEach(questionId => {
      const questionIndex = questions.findIndex(q => q.id === questionId);
      const answerIndex = answers[questionId];
      const option = questions[questionIndex].options[answerIndex];
      
      Object.keys(option.scores).forEach(tool => {
        scores[tool] = (scores[tool] || 0) + option.scores[tool];
      });
    });

    const sortedTools = Object.entries(scores).sort((a, b) => b[1] - a[1]);
    const topTools = sortedTools.slice(0, 3).map(([tool]) => tool);
    
    const aiTools = {
      chatgpt: 'thinking',
      perplexity: 'thinking',
      manus: 'design',
      canva: 'design',
      gemini: 'design',
      genspark: 'automation',
      n8n: 'automation'
    };
    
    const categories = topTools.map(tool => aiTools[tool]);
    const mostCommonCategory = categories.sort((a, b) =>
      categories.filter(v => v === a).length - categories.filter(v => v === b).length
    ).pop();

    return resultPatterns[mostCommonCategory];
  };

  const resetQuiz = () => {
    setStarted(false);
    setCurrentQuestion(0);
    setAnswers({});
    setShowResult(false);
  };

  if (!started) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-3 flex items-center">
        <div className="w-full max-w-md mx-auto">
          <div className="bg-white rounded-2xl shadow-xl p-5">
            <div className="mb-5">
              <div className="flex justify-center gap-3 mb-4">
                <div className="text-4xl animate-bounce">🤖</div>
                <div className="text-4xl animate-bounce" style={{ animationDelay: '0.1s' }}>✨</div>
                <div className="text-4xl animate-bounce" style={{ animationDelay: '0.2s' }}>🚀</div>
              </div>
              <h1 className="text-2xl font-bold text-gray-800 mb-2 text-center leading-snug">
                あなたに最適な<br />
                <span className="bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                  AIツール診断
                </span>
              </h1>
              <p className="text-base text-gray-600 text-center">
                ― そして、その先へ。
              </p>
            </div>

            <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-5">
              <h2 className="text-lg font-bold text-gray-800 mb-4 text-center">
                あなたの"仕事のめんどくさい"をAIで解決
              </h2>
              
              <div className="grid grid-cols-3 gap-3 mb-4">
                <div className="bg-white p-3 rounded-lg shadow-sm">
                  <div className="text-2xl mb-1">⏱️</div>
                  <h3 className="font-bold text-gray-800 text-xs mb-1">たった5分</h3>
                  <p className="text-xs text-gray-600">簡単な質問</p>
                </div>
                <div className="bg-white p-3 rounded-lg shadow-sm">
                  <div className="text-2xl mb-1">🎯</div>
                  <h3 className="font-bold text-gray-800 text-xs mb-1">最適なAI</h3>
                  <p className="text-xs text-gray-600">課題に合わせて</p>
                </div>
                <div className="bg-white p-3 rounded-lg shadow-sm">
                  <div className="text-2xl mb-1">💡</div>
                  <h3 className="font-bold text-gray-800 text-xs mb-1">すぐ使える</h3>
                  <p className="text-xs text-gray-600">具体的活用法</p>
                </div>
              </div>

              <div className="bg-white p-3 rounded-lg">
                <h3 className="font-bold text-gray-800 text-sm mb-2 flex items-center gap-2">
                  <span className="text-lg">📋</span>
                  こんな方におすすめ
                </h3>
                <ul className="space-y-1.5 text-xs text-gray-700">
                  <li className="flex items-start gap-1.5">
                    <span className="text-purple-500 mt-0.5">✓</span>
                    <span>AIツールが多すぎて、どれを使えばいいかわからない</span>
                  </li>
                  <li className="flex items-start gap-1.5">
                    <span className="text-purple-500 mt-0.5">✓</span>
                    <span>仕事の効率を上げたいけど、何から始めればいいか迷っている</span>
                  </li>
                  <li className="flex items-start gap-1.5">
                    <span className="text-purple-500 mt-0.5">✓</span>
                    <span>AIを使って、もっと創造的な仕事に時間を使いたい</span>
                  </li>
                </ul>
              </div>
            </div>

            <button
              onClick={() => setStarted(true)}
              className="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-full font-bold text-base hover:shadow-lg transition-all flex items-center justify-center gap-2"
            >
              <Sparkles className="w-5 h-5" />
              診断を始める
              <ChevronRight className="w-5 h-5" />
            </button>

            <p className="text-xs text-gray-500 mt-3 text-center">
              全7問 / 所要時間：約3分
            </p>
          </div>
        </div>
      </div>
    );
  }

  if (showResult) {
    const result = calculateResult();
    
    return (
      <div className="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-3">
        <div className="w-full max-w-md mx-auto">
          <div className="bg-white rounded-2xl shadow-xl p-4 mb-4">
            <div className="text-center mb-5">
              <div className="flex justify-center mb-3">
                {result.icon}
              </div>
              <h2 className="text-xl font-bold text-gray-800 mb-1">診断結果</h2>
              <p className="text-sm text-gray-600 mb-2">あなたにおすすめのAIツールは...</p>
              <div className="inline-block bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-1.5 rounded-full text-sm font-bold">
                {result.title}
              </div>
            </div>

            <div className="space-y-3 mb-5">
              {result.tools.map((tool, index) => (
                <div key={index} className="bg-gradient-to-r from-gray-50 to-white p-3 rounded-xl border border-gray-100">
                  <div className="flex items-start gap-3">
                    <div className="flex-shrink-0 w-10 h-10 bg-white rounded-lg shadow-sm p-1.5 flex items-center justify-center">
                      <img 
                        src={tool.logo} 
                        alt={`${tool.name} logo`}
                        className="w-full h-full object-contain"
                      />
                    </div>
                    <div className="flex-1 min-w-0">
                      <h3 className="text-sm font-bold text-gray-800 mb-1">{tool.name}</h3>
                      <p className="text-xs text-gray-600 leading-relaxed">{tool.desc}</p>
                    </div>
                  </div>
                </div>
              ))}
            </div>

            <div className="bg-gradient-to-r from-purple-100 to-pink-100 p-3 rounded-xl mb-4">
              <div className="flex items-center gap-2 mb-2">
                <Sparkles className="w-4 h-4 text-purple-600" />
                <h3 className="text-sm font-bold text-gray-800">これらをAIチームとして連携できたら？</h3>
              </div>
              <p className="text-xs text-gray-700 leading-relaxed">
                {result.message}そんな「自動で動くAIチーム」を作る方法を学べます。
              </p>
            </div>

            <div className="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-xl text-center">
              <h3 className="text-base font-bold mb-2">🚀 AIエージェント習得ワークショップ</h3>
              <p className="text-xs mb-3 opacity-90 leading-relaxed">
                AIを使う側からAIを動かす側へ。<br />
                あなた専用のAIアシスタントを作る実践型講座です。
              </p>
              <a 
                href="https://ipspub.com/lp/clp/ai_agent_ws1/"
                target="_blank"
                rel="noopener noreferrer"
                className="inline-block bg-white text-purple-600 px-5 py-2.5 rounded-full font-bold text-sm hover:bg-gray-100 transition-all shadow-lg"
              >
                詳細を見る →
              </a>
            </div>

            <div className="text-center mt-4">
              <button 
                onClick={resetQuiz}
                className="text-gray-500 hover:text-gray-700 underline text-xs"
              >
                もう一度診断する
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  }

  const progress = ((currentQuestion + 1) / questions.length) * 100;

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-3 flex items-center">
      <div className="w-full max-w-md mx-auto">
        <div className="bg-white rounded-2xl shadow-xl p-4">
          <div className="mb-5">
            <div className="flex justify-between items-center mb-2">
              <span className="text-xs font-semibold text-gray-500">
                質問 {currentQuestion + 1} / {questions.length}
              </span>
              <span className="text-xs font-semibold text-purple-600">
                {Math.round(progress)}%
              </span>
            </div>
            <div className="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
              <div 
                className="bg-gradient-to-r from-blue-500 to-purple-500 h-full rounded-full transition-all duration-500"
                style={{ width: `${progress}%` }}
              />
            </div>
          </div>

          <div className="mb-5">
            <h2 className="text-base font-bold text-gray-800 mb-4 leading-snug">
              {questions[currentQuestion].question}
            </h2>
            
            <div className="space-y-2">
              {questions[currentQuestion].options.map((option, index) => (
                <button
                  key={index}
                  onClick={() => handleAnswer(index)}
                  className="w-full text-left p-3 bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-xl hover:border-purple-400 hover:shadow-md transition-all group"
                >
                  <div className="flex items-center justify-between">
                    <span className="text-sm text-gray-700 font-medium group-hover:text-purple-600 transition-colors pr-2">
                      {option.text}
                    </span>
                    <ChevronRight className="w-4 h-4 text-gray-400 group-hover:text-purple-600 transition-colors flex-shrink-0" />
                  </div>
                </button>
              ))}
            </div>
          </div>

          {currentQuestion > 0 && (
            <button
              onClick={() => setCurrentQuestion(currentQuestion - 1)}
              className="text-gray-500 hover:text-gray-700 text-xs underline"
            >
              ← 前の質問に戻る
            </button>
          )}
        </div>

        <div className="text-center mt-3 text-xs text-gray-500">
          あなたの仕事のめんどくさいをAIで解決
        </div>
      </div>
    </div>
  );
};
